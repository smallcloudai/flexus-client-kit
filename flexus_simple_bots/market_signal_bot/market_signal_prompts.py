import json

BOT_PERSONALITY_MD = "You are a market signal operations bot. You work in strict evidence-first mode. One run equals one channel for signal detection. Never invent evidence, never hide uncertainty, and always emit structured artifacts for downstream aggregation."
BOT_EXPERTS = json.loads("[{\"name\": \"default\", \"fexp_description\": \"Default route for channel signal detection\", \"fexp_allow_tools\": \"flexus_policy_document,print_widget,signal_search_demand_api,signal_social_trends_api,signal_news_events_api,signal_review_voice_api,signal_marketplace_demand_api,signal_web_traffic_intel_api,signal_jobs_demand_api,signal_dev_ecosystem_api,signal_public_interest_api,signal_professional_network_api\", \"fexp_block_tools\": \"\", \"skills\": [\"skill_google_trends_signal_detection\", \"skill_x_signal_detection\", \"skill_reddit_signal_detection\", \"skill_web_change_detection\"], \"body_md\": \"Run one-channel signal detection and return a structured snapshot artifact.\"}, {\"name\": \"market_signal_detector\", \"fexp_description\": \"Detect and normalize market signals for one channel per run\", \"fexp_allow_tools\": \"flexus_policy_document,print_widget,signal_search_demand_api,signal_social_trends_api,signal_news_events_api,signal_review_voice_api,signal_marketplace_demand_api,signal_web_traffic_intel_api,signal_jobs_demand_api,signal_dev_ecosystem_api,signal_public_interest_api,signal_professional_network_api\", \"fexp_block_tools\": \"\", \"skills\": [\"skill_google_trends_signal_detection\", \"skill_x_signal_detection\", \"skill_reddit_signal_detection\", \"skill_web_change_detection\"], \"pdoc_output_schemas\": [{\"schema_name\": \"market_signal_snapshot_schema\", \"schema\": {\"type\": \"object\", \"required\": [\"artifact_type\", \"version\", \"channel\", \"query\", \"time_window\", \"result_state\", \"evidence_count\", \"coverage_status\", \"confidence\", \"confidence_reason\", \"signals\", \"sources\", \"limitations\", \"next_checks\"], \"additionalProperties\": false, \"properties\": {\"artifact_type\": {\"type\": \"string\", \"enum\": [\"market_signal_snapshot\"]}, \"version\": {\"type\": \"string\"}, \"channel\": {\"type\": \"string\"}, \"query\": {\"type\": \"string\"}, \"time_window\": {\"type\": \"object\", \"required\": [\"start_date\", \"end_date\"], \"additionalProperties\": false, \"properties\": {\"start_date\": {\"type\": \"string\"}, \"end_date\": {\"type\": \"string\"}}}, \"result_state\": {\"type\": \"string\", \"enum\": [\"ok\", \"zero_results\", \"insufficient_data\", \"technical_failure\"]}, \"evidence_count\": {\"type\": \"integer\", \"minimum\": 0}, \"coverage_status\": {\"type\": \"string\", \"enum\": [\"full\", \"partial\", \"none\"]}, \"confidence\": {\"type\": \"number\", \"minimum\": 0, \"maximum\": 1}, \"confidence_reason\": {\"type\": \"string\"}, \"signals\": {\"type\": \"array\", \"items\": {\"type\": \"object\", \"required\": [\"signal_id\", \"signal_summary\", \"signal_strength\", \"supporting_source_refs\"], \"additionalProperties\": false, \"properties\": {\"signal_id\": {\"type\": \"string\"}, \"signal_summary\": {\"type\": \"string\"}, \"signal_strength\": {\"type\": \"string\", \"enum\": [\"weak\", \"moderate\", \"strong\"]}, \"supporting_source_refs\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}}}}, \"sources\": {\"type\": \"array\", \"items\": {\"type\": \"object\", \"required\": [\"source_type\", \"source_ref\"], \"additionalProperties\": false, \"properties\": {\"source_type\": {\"type\": \"string\", \"enum\": [\"api\", \"artifact\", \"tool_output\", \"event_stream\", \"expert_handoff\", \"user_directive\"]}, \"source_ref\": {\"type\": \"string\"}}}}, \"limitations\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}, \"failure_code\": {\"type\": \"string\"}, \"failure_message\": {\"type\": \"string\"}, \"next_checks\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}}}}], \"body_md\": \"Create one channel signal snapshot per run, including result_state (ok|zero_results|insufficient_data|technical_failure), evidence quality, and source-backed signal records.\"}, {\"name\": \"signal_boundary_analyst\", \"fexp_description\": \"Aggregate 01A channel snapshots into bounded signal register and risk-ranked hypotheses\", \"fexp_allow_tools\": \"flexus_policy_document\", \"fexp_block_tools\": \"print_widget\", \"skills\": [], \"pdoc_output_schemas\": [{\"schema_name\": \"signal_register_schema\", \"schema\": {\"type\": \"object\", \"required\": [\"artifact_type\", \"version\", \"aggregation_window\", \"channels_considered\", \"register\"], \"additionalProperties\": false, \"properties\": {\"artifact_type\": {\"type\": \"string\", \"enum\": [\"signal_register\"]}, \"version\": {\"type\": \"string\"}, \"aggregation_window\": {\"type\": \"object\", \"required\": [\"start_date\", \"end_date\"], \"additionalProperties\": false, \"properties\": {\"start_date\": {\"type\": \"string\"}, \"end_date\": {\"type\": \"string\"}}}, \"channels_considered\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}, \"register\": {\"type\": \"array\", \"items\": {\"type\": \"object\", \"required\": [\"register_id\", \"signal_theme\", \"combined_strength\", \"confidence\", \"supporting_snapshot_refs\", \"conflict_notes\"], \"additionalProperties\": false, \"properties\": {\"register_id\": {\"type\": \"string\"}, \"signal_theme\": {\"type\": \"string\"}, \"combined_strength\": {\"type\": \"string\", \"enum\": [\"weak\", \"moderate\", \"strong\"]}, \"confidence\": {\"type\": \"number\", \"minimum\": 0, \"maximum\": 1}, \"supporting_snapshot_refs\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}, \"conflict_notes\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}}}}}}}, {\"schema_name\": \"hypothesis_backlog_schema\", \"schema\": {\"type\": \"object\", \"required\": [\"artifact_type\", \"version\", \"prioritization_rule\", \"in_scope\", \"out_of_scope\", \"not_now\", \"hypotheses\"], \"additionalProperties\": false, \"properties\": {\"artifact_type\": {\"type\": \"string\", \"enum\": [\"hypothesis_backlog\"]}, \"version\": {\"type\": \"string\"}, \"prioritization_rule\": {\"type\": \"string\", \"enum\": [\"impact_x_confidence_x_reversibility\"]}, \"in_scope\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}, \"out_of_scope\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}, \"not_now\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}, \"hypotheses\": {\"type\": \"array\", \"items\": {\"type\": \"object\", \"required\": [\"hypothesis_id\", \"statement\", \"priority_rank\", \"impact_score\", \"confidence_score\", \"reversibility_score\", \"fail_fast_condition\", \"next_validation_step\", \"supporting_register_refs\"], \"additionalProperties\": false, \"properties\": {\"hypothesis_id\": {\"type\": \"string\"}, \"statement\": {\"type\": \"string\"}, \"priority_rank\": {\"type\": \"integer\", \"minimum\": 1}, \"impact_score\": {\"type\": \"number\", \"minimum\": 0, \"maximum\": 1}, \"confidence_score\": {\"type\": \"number\", \"minimum\": 0, \"maximum\": 1}, \"reversibility_score\": {\"type\": \"number\", \"minimum\": 0, \"maximum\": 1}, \"fail_fast_condition\": {\"type\": \"string\"}, \"next_validation_step\": {\"type\": \"string\"}, \"supporting_register_refs\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}}}}}}}], \"body_md\": \"Read 01A snapshot artifacts, deduplicate and normalize cross-channel evidence, then emit signal register and hypothesis backlog payloads with explicit in-scope/out-of-scope boundaries.\"}]")
BOT_SKILLS = json.loads("[{\"name\": \"skill_google_trends_signal_detection\", \"description\": \"Google Trends signal detection method\", \"body_md\": \"Use Google Trends data to detect seasonality, breakout terms, region deltas, and baseline shifts.\"}, {\"name\": \"skill_x_signal_detection\", \"description\": \"X/Twitter signal detection method\", \"body_md\": \"Detect narrative drift, velocity bursts, and noise-filtered account cluster signals.\"}, {\"name\": \"skill_reddit_signal_detection\", \"description\": \"Reddit signal detection method\", \"body_md\": \"Score subreddit relevance, comment-depth quality, and noise-filtered discussion trends.\"}, {\"name\": \"skill_web_change_detection\", \"description\": \"Competitor web-change detection method\", \"body_md\": \"Classify webpage diffs by pricing, positioning, CTA, and feature-claim changes.\"}]")
