[
    {
        "name": "default",
        "fexp_description": "Default route for churn learning operations",
        "fexp_allow_tools": "flexus_policy_document,print_widget,churn_feedback_capture_api,churn_interview_ops_api,churn_transcript_analysis_api,churn_remediation_backlog_api",
        "fexp_block_tools": "",
        "skills": [],
        "body_md": "Route to churn interview or root-cause classification based on user intent."
    },
    {
        "name": "churn_interview_operator",
        "fexp_description": "Run structured churn interviews",
        "fexp_allow_tools": "flexus_policy_document,print_widget,churn_feedback_capture_api,churn_interview_ops_api,churn_transcript_analysis_api",
        "fexp_block_tools": "",
        "skills": [],
        "pdoc_output_schemas": [
            {
                "schema_name": "churn_interview_corpus_schema",
                "schema": {
                    "type": "object",
                    "required": [
                        "artifact_type",
                        "version",
                        "analysis_window",
                        "segment_filters",
                        "accounts",
                        "interview_records",
                        "coverage_summary",
                        "sources"
                    ],
                    "additionalProperties": false,
                    "properties": {
                        "artifact_type": {
                            "type": "string",
                            "enum": [
                                "churn_interview_corpus"
                            ]
                        },
                        "version": {
                            "type": "string"
                        },
                        "analysis_window": {
                            "type": "object",
                            "required": [
                                "start_date",
                                "end_date"
                            ],
                            "additionalProperties": false,
                            "properties": {
                                "start_date": {
                                    "type": "string"
                                },
                                "end_date": {
                                    "type": "string"
                                }
                            }
                        },
                        "segment_filters": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "accounts": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "interview_records": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "required": [
                                    "interview_id",
                                    "account_ref",
                                    "churn_event_ref",
                                    "interview_date",
                                    "participants",
                                    "transcript_ref",
                                    "key_quotes"
                                ],
                                "additionalProperties": false,
                                "properties": {
                                    "interview_id": {
                                        "type": "string"
                                    },
                                    "account_ref": {
                                        "type": "string"
                                    },
                                    "churn_event_ref": {
                                        "type": "string"
                                    },
                                    "interview_date": {
                                        "type": "string"
                                    },
                                    "participants": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "transcript_ref": {
                                        "type": "string"
                                    },
                                    "key_quotes": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        },
                        "coverage_summary": {
                            "type": "object",
                            "required": [
                                "scheduled_count",
                                "completed_count",
                                "coverage_rate"
                            ],
                            "additionalProperties": false,
                            "properties": {
                                "scheduled_count": {
                                    "type": "number",
                                    "minimum": 0
                                },
                                "completed_count": {
                                    "type": "number",
                                    "minimum": 0
                                },
                                "coverage_rate": {
                                    "type": "number",
                                    "minimum": 0,
                                    "maximum": 1
                                }
                            }
                        },
                        "sources": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "required": [
                                    "source_type",
                                    "source_ref"
                                ],
                                "additionalProperties": false,
                                "properties": {
                                    "source_type": {
                                        "type": "string",
                                        "enum": [
                                            "api",
                                            "artifact",
                                            "tool_output",
                                            "event_stream",
                                            "expert_handoff",
                                            "user_directive"
                                        ]
                                    },
                                    "source_ref": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            {
                "schema_name": "churn_interview_coverage_schema",
                "schema": {
                    "type": "object",
                    "required": [
                        "artifact_type",
                        "version",
                        "target_segments",
                        "completed_interviews",
                        "coverage_gaps",
                        "required_followups"
                    ],
                    "additionalProperties": false,
                    "properties": {
                        "artifact_type": {
                            "type": "string",
                            "enum": [
                                "churn_interview_coverage"
                            ]
                        },
                        "version": {
                            "type": "string"
                        },
                        "target_segments": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "completed_interviews": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "coverage_gaps": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "required_followups": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        }
                    }
                }
            },
            {
                "schema_name": "churn_signal_quality_schema",
                "schema": {
                    "type": "object",
                    "required": [
                        "artifact_type",
                        "version",
                        "quality_checks",
                        "failed_checks",
                        "remediation_actions"
                    ],
                    "additionalProperties": false,
                    "properties": {
                        "artifact_type": {
                            "type": "string",
                            "enum": [
                                "churn_signal_quality"
                            ]
                        },
                        "version": {
                            "type": "string"
                        },
                        "quality_checks": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "required": [
                                    "check_id",
                                    "status"
                                ],
                                "additionalProperties": false,
                                "properties": {
                                    "check_id": {
                                        "type": "string"
                                    },
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "pass",
                                            "fail"
                                        ]
                                    },
                                    "notes": {
                                        "type": "string"
                                    }
                                }
                            }
                        },
                        "failed_checks": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "remediation_actions": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        ],
        "body_md": "Produce interview corpus and coverage artifacts with verifiable transcript evidence; fail fast when sampling coverage or interview traceability is insufficient."
    },
    {
        "name": "rootcause_classifier",
        "fexp_description": "Classify churn drivers and prioritize fixes",
        "fexp_allow_tools": "flexus_policy_document,print_widget,churn_feedback_capture_api,churn_transcript_analysis_api,churn_remediation_backlog_api",
        "fexp_block_tools": "",
        "skills": [],
        "pdoc_output_schemas": [
            {
                "schema_name": "churn_rootcause_backlog_schema",
                "schema": {
                    "type": "object",
                    "required": [
                        "artifact_type",
                        "version",
                        "analysis_window",
                        "rootcauses",
                        "fix_backlog",
                        "confidence_notes",
                        "sources"
                    ],
                    "additionalProperties": false,
                    "properties": {
                        "artifact_type": {
                            "type": "string",
                            "enum": [
                                "churn_rootcause_backlog"
                            ]
                        },
                        "version": {
                            "type": "string"
                        },
                        "analysis_window": {
                            "type": "object",
                            "required": [
                                "start_date",
                                "end_date"
                            ],
                            "additionalProperties": false,
                            "properties": {
                                "start_date": {
                                    "type": "string"
                                },
                                "end_date": {
                                    "type": "string"
                                }
                            }
                        },
                        "rootcauses": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "required": [
                                    "rootcause_id",
                                    "theme",
                                    "severity",
                                    "frequency",
                                    "evidence_refs",
                                    "affected_segments"
                                ],
                                "additionalProperties": false,
                                "properties": {
                                    "rootcause_id": {
                                        "type": "string"
                                    },
                                    "theme": {
                                        "type": "string"
                                    },
                                    "severity": {
                                        "type": "string",
                                        "enum": [
                                            "low",
                                            "medium",
                                            "high",
                                            "critical"
                                        ]
                                    },
                                    "frequency": {
                                        "type": "number",
                                        "minimum": 0
                                    },
                                    "evidence_refs": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "affected_segments": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        },
                        "fix_backlog": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "required": [
                                    "fix_id",
                                    "rootcause_id",
                                    "owner",
                                    "target_date",
                                    "expected_retention_impact",
                                    "priority"
                                ],
                                "additionalProperties": false,
                                "properties": {
                                    "fix_id": {
                                        "type": "string"
                                    },
                                    "rootcause_id": {
                                        "type": "string"
                                    },
                                    "owner": {
                                        "type": "string"
                                    },
                                    "target_date": {
                                        "type": "string"
                                    },
                                    "expected_retention_impact": {
                                        "type": "number",
                                        "minimum": 0
                                    },
                                    "priority": {
                                        "type": "string",
                                        "enum": [
                                            "p0",
                                            "p1",
                                            "p2"
                                        ]
                                    }
                                }
                            }
                        },
                        "confidence_notes": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "sources": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "required": [
                                    "source_type",
                                    "source_ref"
                                ],
                                "additionalProperties": false,
                                "properties": {
                                    "source_type": {
                                        "type": "string",
                                        "enum": [
                                            "api",
                                            "artifact",
                                            "tool_output",
                                            "event_stream",
                                            "expert_handoff",
                                            "user_directive"
                                        ]
                                    },
                                    "source_ref": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            {
                "schema_name": "churn_fix_experiment_plan_schema",
                "schema": {
                    "type": "object",
                    "required": [
                        "artifact_type",
                        "version",
                        "experiment_batch_id",
                        "experiments",
                        "measurement_plan",
                        "stop_conditions"
                    ],
                    "additionalProperties": false,
                    "properties": {
                        "artifact_type": {
                            "type": "string",
                            "enum": [
                                "churn_fix_experiment_plan"
                            ]
                        },
                        "version": {
                            "type": "string"
                        },
                        "experiment_batch_id": {
                            "type": "string"
                        },
                        "experiments": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "required": [
                                    "experiment_id",
                                    "hypothesis",
                                    "target_segment",
                                    "owner",
                                    "start_date",
                                    "success_metric"
                                ],
                                "additionalProperties": false,
                                "properties": {
                                    "experiment_id": {
                                        "type": "string"
                                    },
                                    "hypothesis": {
                                        "type": "string"
                                    },
                                    "target_segment": {
                                        "type": "string"
                                    },
                                    "owner": {
                                        "type": "string"
                                    },
                                    "start_date": {
                                        "type": "string"
                                    },
                                    "success_metric": {
                                        "type": "string"
                                    }
                                }
                            }
                        },
                        "measurement_plan": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "stop_conditions": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        }
                    }
                }
            },
            {
                "schema_name": "churn_prevention_priority_gate_schema",
                "schema": {
                    "type": "object",
                    "required": [
                        "artifact_type",
                        "version",
                        "gate_status",
                        "must_fix_items",
                        "deferred_items",
                        "decision_owner"
                    ],
                    "additionalProperties": false,
                    "properties": {
                        "artifact_type": {
                            "type": "string",
                            "enum": [
                                "churn_prevention_priority_gate"
                            ]
                        },
                        "version": {
                            "type": "string"
                        },
                        "gate_status": {
                            "type": "string",
                            "enum": [
                                "go",
                                "conditional",
                                "no_go"
                            ]
                        },
                        "must_fix_items": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "deferred_items": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "decision_owner": {
                            "type": "string"
                        }
                    }
                }
            }
        ],
        "body_md": "Classify churn causes into an owner-linked remediation backlog; fail fast when evidence-to-cause mapping is ambiguous or fix ownership is undefined."
    }
]
