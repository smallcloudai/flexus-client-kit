import json

BOT_PERSONALITY_MD = "You are a segment analyst bot. You enrich segment candidates and produce one explicit primary segment decision. Work in strict evidence-first mode. Never invent evidence, never hide uncertainty, and always emit structured artifacts for downstream use."
BOT_EXPERTS = json.loads("[{\"name\": \"default\", \"fexp_description\": \"Default route for segment qualification\", \"fexp_allow_tools\": \"flexus_policy_document,print_widget,segment_crm_signal_api,segment_firmographic_enrichment_api,segment_technographic_profile_api,segment_market_traction_api,segment_intent_signal_api\", \"fexp_block_tools\": \"\", \"skills\": [], \"body_md\": \"Route to segment enrichment or primary segment decision based on user intent.\"}, {\"name\": \"segment_data_enricher\", \"fexp_description\": \"Build segment evidence packs from first-party CRM and external firmographic/technographic/intent sources\", \"fexp_allow_tools\": \"flexus_policy_document,print_widget,segment_crm_signal_api,segment_firmographic_enrichment_api,segment_technographic_profile_api,segment_market_traction_api,segment_intent_signal_api\", \"fexp_block_tools\": \"\", \"skills\": [], \"pdoc_output_schemas\": [{\"schema_name\": \"segment_enrichment_schema\", \"schema\": {\"type\": \"object\", \"required\": [\"artifact_type\", \"version\", \"enrichment_run_id\", \"candidate_segments\", \"data_coverage\", \"gaps\", \"next_refresh_checks\"], \"additionalProperties\": false, \"properties\": {\"artifact_type\": {\"type\": \"string\", \"enum\": [\"segment_enrichment\"]}, \"version\": {\"type\": \"string\"}, \"enrichment_run_id\": {\"type\": \"string\"}, \"candidate_segments\": {\"type\": \"array\", \"items\": {\"type\": \"object\", \"required\": [\"segment_id\", \"segment_name\", \"source_refs\", \"firmographics\", \"technographics\", \"demand_signals\", \"crm_signals\", \"data_completeness\", \"confidence\"], \"additionalProperties\": false, \"properties\": {\"segment_id\": {\"type\": \"string\"}, \"segment_name\": {\"type\": \"string\"}, \"source_refs\": {\"type\": \"array\", \"items\": {\"type\": \"object\", \"required\": [\"source_type\", \"source_ref\"], \"additionalProperties\": false, \"properties\": {\"source_type\": {\"type\": \"string\", \"enum\": [\"api\", \"artifact\", \"tool_output\", \"event_stream\", \"expert_handoff\", \"user_directive\"]}, \"source_ref\": {\"type\": \"string\"}}}}, \"firmographics\": {\"type\": \"object\", \"required\": [\"employee_range\", \"revenue_range\", \"geo_focus\"], \"additionalProperties\": false, \"properties\": {\"employee_range\": {\"type\": \"string\"}, \"revenue_range\": {\"type\": \"string\"}, \"geo_focus\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}, \"ownership_type\": {\"type\": \"string\"}}}, \"technographics\": {\"type\": \"array\", \"items\": {\"type\": \"object\", \"required\": [\"stack_name\", \"adoption_signal\", \"source_ref\"], \"additionalProperties\": false, \"properties\": {\"stack_name\": {\"type\": \"string\"}, \"adoption_signal\": {\"type\": \"string\", \"enum\": [\"weak\", \"moderate\", \"strong\"]}, \"source_ref\": {\"type\": \"string\"}}}}, \"demand_signals\": {\"type\": \"object\", \"required\": [\"search_demand_index\", \"intent_surge_level\"], \"additionalProperties\": false, \"properties\": {\"search_demand_index\": {\"type\": \"number\", \"minimum\": 0}, \"intent_surge_level\": {\"type\": \"string\", \"enum\": [\"low\", \"medium\", \"high\"]}, \"intent_source_refs\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}}}, \"crm_signals\": {\"type\": \"object\", \"required\": [\"open_pipeline_count\", \"win_rate_proxy\", \"avg_sales_cycle_days\"], \"additionalProperties\": false, \"properties\": {\"open_pipeline_count\": {\"type\": \"integer\", \"minimum\": 0}, \"win_rate_proxy\": {\"type\": \"number\", \"minimum\": 0, \"maximum\": 1}, \"avg_sales_cycle_days\": {\"type\": \"number\", \"minimum\": 0}}}, \"data_completeness\": {\"type\": \"number\", \"minimum\": 0, \"maximum\": 1}, \"confidence\": {\"type\": \"number\", \"minimum\": 0, \"maximum\": 1}}}}, \"data_coverage\": {\"type\": \"object\", \"required\": [\"segments_total\", \"segments_with_full_minimum_data\"], \"additionalProperties\": false, \"properties\": {\"segments_total\": {\"type\": \"integer\", \"minimum\": 0}, \"segments_with_full_minimum_data\": {\"type\": \"integer\", \"minimum\": 0}}}, \"gaps\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}, \"next_refresh_checks\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}}}}, {\"schema_name\": \"segment_data_quality_schema\", \"schema\": {\"type\": \"object\", \"required\": [\"artifact_type\", \"version\", \"enrichment_run_id\", \"quality_checks\", \"pass_fail\", \"blocking_issues\"], \"additionalProperties\": false, \"properties\": {\"artifact_type\": {\"type\": \"string\", \"enum\": [\"segment_data_quality\"]}, \"version\": {\"type\": \"string\"}, \"enrichment_run_id\": {\"type\": \"string\"}, \"quality_checks\": {\"type\": \"array\", \"items\": {\"type\": \"object\", \"required\": [\"check_id\", \"result\", \"notes\"], \"additionalProperties\": false, \"properties\": {\"check_id\": {\"type\": \"string\"}, \"result\": {\"type\": \"string\", \"enum\": [\"pass\", \"warn\", \"fail\"]}, \"notes\": {\"type\": \"string\"}}}}, \"pass_fail\": {\"type\": \"string\", \"enum\": [\"pass\", \"fail\"]}, \"blocking_issues\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}}}}], \"body_md\": \"Enrich and normalize candidate segments into evidence-complete payloads; fail fast when minimum data coverage or source traceability requirements are not met.\"}, {\"name\": \"primary_segment_decision_analyst\", \"fexp_description\": \"Select one primary segment using explicit weighted scoring, risk controls, and rejection rationale\", \"fexp_allow_tools\": \"flexus_policy_document,print_widget,segment_crm_signal_api,segment_market_traction_api,segment_intent_signal_api\", \"fexp_block_tools\": \"\", \"skills\": [], \"pdoc_output_schemas\": [{\"schema_name\": \"segment_priority_matrix_schema\", \"schema\": {\"type\": \"object\", \"required\": [\"artifact_type\", \"version\", \"evaluation_rule\", \"weights\", \"candidates\"], \"additionalProperties\": false, \"properties\": {\"artifact_type\": {\"type\": \"string\", \"enum\": [\"segment_priority_matrix\"]}, \"version\": {\"type\": \"string\"}, \"evaluation_rule\": {\"type\": \"string\", \"enum\": [\"fit_x_pain_x_access_x_velocity\"]}, \"weights\": {\"type\": \"object\", \"required\": [\"fit\", \"pain\", \"access\", \"velocity\"], \"additionalProperties\": false, \"properties\": {\"fit\": {\"type\": \"number\", \"minimum\": 0, \"maximum\": 1}, \"pain\": {\"type\": \"number\", \"minimum\": 0, \"maximum\": 1}, \"access\": {\"type\": \"number\", \"minimum\": 0, \"maximum\": 1}, \"velocity\": {\"type\": \"number\", \"minimum\": 0, \"maximum\": 1}}}, \"candidates\": {\"type\": \"array\", \"items\": {\"type\": \"object\", \"required\": [\"segment_id\", \"fit_score\", \"pain_score\", \"access_score\", \"velocity_score\", \"weighted_score\", \"risks\", \"supporting_refs\"], \"additionalProperties\": false, \"properties\": {\"segment_id\": {\"type\": \"string\"}, \"fit_score\": {\"type\": \"number\", \"minimum\": 0, \"maximum\": 1}, \"pain_score\": {\"type\": \"number\", \"minimum\": 0, \"maximum\": 1}, \"access_score\": {\"type\": \"number\", \"minimum\": 0, \"maximum\": 1}, \"velocity_score\": {\"type\": \"number\", \"minimum\": 0, \"maximum\": 1}, \"weighted_score\": {\"type\": \"number\", \"minimum\": 0, \"maximum\": 1}, \"risks\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}, \"supporting_refs\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}}}}}}}, {\"schema_name\": \"primary_segment_decision_schema\", \"schema\": {\"type\": \"object\", \"required\": [\"artifact_type\", \"version\", \"selected_primary_segment\", \"runner_up\", \"decision_reason\", \"rejections\", \"confidence\", \"next_validation_steps\"], \"additionalProperties\": false, \"properties\": {\"artifact_type\": {\"type\": \"string\", \"enum\": [\"primary_segment_decision\"]}, \"version\": {\"type\": \"string\"}, \"selected_primary_segment\": {\"type\": \"object\", \"required\": [\"segment_id\", \"why_now\", \"entry_motion\", \"risk_flags\"], \"additionalProperties\": false, \"properties\": {\"segment_id\": {\"type\": \"string\"}, \"why_now\": {\"type\": \"string\"}, \"entry_motion\": {\"type\": \"string\", \"enum\": [\"outbound\", \"inbound\", \"partner_led\", \"plg_assisted\"]}, \"risk_flags\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}}}, \"runner_up\": {\"type\": \"string\"}, \"decision_reason\": {\"type\": \"string\"}, \"rejections\": {\"type\": \"array\", \"items\": {\"type\": \"object\", \"required\": [\"segment_id\", \"rejection_reason\"], \"additionalProperties\": false, \"properties\": {\"segment_id\": {\"type\": \"string\"}, \"rejection_reason\": {\"type\": \"string\"}}}}, \"confidence\": {\"type\": \"number\", \"minimum\": 0, \"maximum\": 1}, \"next_validation_steps\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}}}}, {\"schema_name\": \"primary_segment_go_no_go_gate_schema\", \"schema\": {\"type\": \"object\", \"required\": [\"artifact_type\", \"version\", \"gate_status\", \"blocking_issues\", \"override_required\"], \"additionalProperties\": false, \"properties\": {\"artifact_type\": {\"type\": \"string\", \"enum\": [\"primary_segment_go_no_go_gate\"]}, \"version\": {\"type\": \"string\"}, \"gate_status\": {\"type\": \"string\", \"enum\": [\"go\", \"no_go\"]}, \"blocking_issues\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}, \"override_required\": {\"type\": \"boolean\"}}}}], \"body_md\": \"Score enriched segments with explicit weights and publish one primary segment decision; fail fast to no-go when evidence confidence is low or score separation is insufficient.\"}]")
BOT_SKILLS = json.loads("[]")
